<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Movie Vault</title>
    <link href="SimpleStyle.css" rel="stylesheet" />
    <script>
        const uri = 'http://localhost:5091';

        document.addEventListener('DOMContentLoaded', function () {

            fetch(uri + "/api/movieinfo/list")

                .then(response => response.json())
                .then(data => {

                    //alert("movie data: " + JSON.stringify(data));
                    //alert(data.data[0].title);

                    var select = document.getElementById('movielist');

                    for (var i = 0; i < data.data.length; i++) {
                        var opt = document.createElement('option');
                        opt.value = i;
                        opt.innerHTML = data.data[i].title;
                        select.appendChild(opt);
                    }

                })
                .catch(error => console.error('Unable to get movies.', error));

            document.getElementById("btnWatchMovie").onclick = (event) => {


                var selectList = document.getElementById("movielist");
                var movieTitle = selectList.options[selectList.selectedIndex].text;
                document.getElementById("videoPlayer").src = "http://localhost:5091/api/movie/get/" + movieTitle;
            }

        });


    </script>
</head>
<body>


    <div class="container">
        <div class="itemSpan2">
            <H1>The video vault</H1>
        </div>
        <div>
            <select id="movielist">
            </select>
        </div>
        <div>
            <button class="button button1" id="btnWatchMovie">Watch movie</button>
        </div>
        <div class="itemSpan2">

            <video id="videoPlayer" width="650" autoplay>
                <source type="video/mp4" />
            </video>
        </div>
    </div>

        <!-- src="http://localhost:5091/api/movie/get"  muted="muted"-->
</body>
</html>
